(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(17),o=t.n(a),u=t(18),i=t(8),s=t(3),d=t(0),l=function(e){return Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{value:e.filter,onChange:e.handleNameFilter})]})},j=function(e){return Object(d.jsxs)("form",{onSubmit:e.addPerson,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(d.jsx)("div",{children:Object(d.jsxs)("button",{type:"submit",children:["add ",e.newName]})})]})},b=function(e){var n=e.person,t=e.toggleDeletePerson;return Object(d.jsxs)("div",{children:[n.name," ",n.number," ",Object(d.jsx)("button",{value:n.id,onClick:function(){return t(n)},children:" delete"})]})},f=function(e){var n=e.persons,t=e.toggleDeletePerson;return Object(d.jsx)("div",{children:n.map((function(e){return Object(d.jsx)(b,{person:e,toggleDeletePerson:t},e.id)}))})},h=t(5),m=t.n(h),O="/api/persons",p=function(){return m.a.get(O).then((function(e){return e.data}))},v=function(e){return m.a.post(O,e).then((function(e){return e.data}))},g=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.message,t=e.typeMessage;return null===n?null:Object(d.jsx)("div",{className:t,children:n})},N=(t(42),function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(s.a)(a,2),b=o[0],h=o[1],m=Object(c.useState)(""),O=Object(s.a)(m,2),N=O[0],C=O[1],S=Object(c.useState)(""),k=Object(s.a)(S,2),P=k[0],y=k[1],D=Object(c.useState)(null),T=Object(s.a)(D,2),M=T[0],E=T[1],F=Object(c.useState)("success"),I=Object(s.a)(F,2),J=I[0],L=I[1];Object(c.useEffect)((function(){p().then((function(e){r(e)}))}),[]);var A=""===P?t:t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(w,{message:M,typeMessage:J}),Object(d.jsx)(l,{filter:P,handleNameFilter:function(e){y(e.target.value)}}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(j,{addPerson:function(e){if(e.preventDefault(),t.some((function(e){return e.name===b}))){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new number"))){var n=Object(i.a)(Object(i.a)({},t.find((function(e){return e.name===b}))),{},{number:N});g(n.id,n).then((function(e){E("Updated ".concat(e.name)),L("success"),setTimeout((function(){E(null)}),3e3),r(t.map((function(n){return n.id!==e.id?n:e}))),h(""),C("")}))}}else{var c={id:t.length+1,name:b,number:N};v(c).then((function(e){E("Added ".concat(e.name)),L("success"),setTimeout((function(){E(null)}),3e3),r([].concat(Object(u.a)(t),[e])),h(""),C("")})).catch((function(e){E(e.response.data.error),L("error"),setTimeout((function(){E(null)}),3e3)}))}},newName:b,newNumber:N,handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){C(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(f,{persons:A,toggleDeletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&x(e.id).then((function(n){r(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){E("Information of ".concat(e.name," has already been removed from server")),L("error"),setTimeout((function(){E(null)}),3e3)}))}})]})});o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(N,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.54774365.chunk.js.map